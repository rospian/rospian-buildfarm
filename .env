# ----------------- CONFIG -----------------
# Environment configuration for ROS 2 Jazzy buildfarm on Debian Trixie (arm64)
# Sourced by scripts via .env.sh - defines paths, distributions, and build settings.
# Override any setting by creating .env.local in the base directory.

# Directories
BASE_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"   # Auto-detected repo root
SCRIPT_DIR="$BASE_DIR"/scripts                             # Helper scripts location
ROS_SUBDIR="ros2"                                          # ROS workspace subdirectory name
WS="${WS:-$BASE_DIR/$ROS_SUBDIR}"                          # Full workspace path (ros2/)

# Distribution & versions
APTREPO="/srv/aptrepo"                                     # Local APT repository base path
OS_NAME="${OS_NAME:-debian}"                               # Target OS (debian or raspios)
OS_DIST="${OS_DIST:-trixie}"                               # Debian/Raspios release codename
ROS_DISTRO="${ROS_DISTRO:-jazzy}"                          # ROS 2 distribution
REPO_DIST="${REPO_DIST:-$OS_DIST-$ROS_DISTRO}"             # Combined repo suite (trixie-jazzy)
ARCH=arm64                                                 # Target architecture

# Build
PARALLEL_JOBS="${PARALLEL_JOBS:-$(($(nproc) - 1))}"       # DEB_BUILD_OPTIONS parallel= value
SBUILD_CHROOT="${SBUILD_CHROOT:-trixie-arm64-sbuild}"     # sbuild/schroot name
SBUILD_DIR="$WS/sbuild"                                    # sbuild working directory
SBUILD_RESULTS="${SBUILD_RESULTS:-$WS}"                    # Where .changes/.debs are placed

# Github gh-pages repo (for publishing via scripts/publish_gh_pages.sh)
PAGES_GIT_BRANCH="gh-pages"                                # Branch to push to
PAGES_DIR="/srv/aptrepo-pages"                             # Local working copy path

# S3 Backup and restore (requires S3_BUCKET in .env.local)
S3_PAGES_PREFIX="aptrepo-pages"                            # S3 prefix for gh-pages content
S3_CANONICAL_PREFIX="aptrepo"                              # S3 prefix for canonical repo mirror

# --- Create a .env.local in the base directory for the following ---

# S3 repo backup - Uncomment and set your S3 bucket name for repository backups:
# S3_BUCKET="your-bucket-name"

# S3 keys backup - Uncomment and configure for GPG keys and metadata backups:
# S3_SECRETS_BUCKET="your-secrets-bucket-name"
# S3_PREFIX_BUCKET="/"                                     # Include trailing slash (default: "/")

# GitHub Pages URL - Uncomment and set your GitHub Pages repository URL:
# Format: git@github.com:username/repo-name.git or github.com:username/repo-name.git
# PAGES_GIT_URL="git@github.com:username/repo-name.git"
